# KaitenSDK — Development Guidelines

## Spec-First Development

Спецификации в `specs/` — единственный источник правды о том,
что и как делается в проекте.

### Порядок работы

1. **Сначала спека** — перед реализацией нового функционала
   обновить или создать спецификацию в `specs/`.
2. **Потом реализация** — код пишется строго по спеке.
3. **Каждое изменение** функционала MUST сопровождаться
   обновлением соответствующей спеки.

### Структура спек

- `specs/001-kaiten-sdk-core/spec.md` — SDK: OpenAPI-генерация,
  типизированные ошибки, convenience-обёртки
- `specs/002-kaiten-cli/spec.md` — CLI: тонкая обёртка над SDK,
  конфиг-файл, подкоманды

### Конституция

Архитектурные принципы и ограничения зафиксированы в
`.specify/memory/constitution.md`. Конституция имеет приоритет
над всеми другими практиками.

### Правила для агентов

- НЕ реализовывать функционал, не описанный в спеке.
- При обнаружении расхождения между кодом и спекой —
  уточнить у пользователя, что является правильным.
- При добавлении нового функционала — сначала обновить спеку,
  получить подтверждение, затем реализовать.
- Always update READMEs when public APIs change. Any PR that
  modifies public API surface must include corresponding README
  updates.

## Kaiten API Documentation

Подробный гайд по парсингу документации Kaiten API: [docs/kaiten-docs-parsing.md](docs/kaiten-docs-parsing.md)

### Обязательное правило

**Перед любым изменением OpenAPI спеки** (`openapi/kaiten.yaml`) — обязательно проверить по документации Kaiten API (https://developers.kaiten.ru), как эндпоинт выглядит на самом деле:
- Какие query/path параметры принимает
- Какие поля в ответе обязательные (`integer`, `string`), а какие nullable (`null | string`)
- Есть ли пагинация (`offset`/`limit`)

Не менять спеку по догадкам или на основе эмпирических данных. Только по документации.
